{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\S_F_Y_N\\\\frontend\\\\src\\\\pages\\\\PaginaCliente.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport '../style/paginaCliente.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction PaginaCliente() {\n  _s();\n  const [notificaciones, setNotificaciones] = useState([]);\n  const [nuevasNotificaciones, setNuevasNotificaciones] = useState(0);\n\n  // Cargar y escuchar notificaciones\n  useEffect(() => {\n    const cargarNotificaciones = () => {\n      const todasNotificaciones = JSON.parse(localStorage.getItem('notificaciones')) || [];\n      const notificacionesCliente = todasNotificaciones.filter(n => n.destinatario === 'cliente' || n.destinatario === 'todos');\n\n      // Contar no leídas\n      const noLeidas = notificacionesCliente.filter(n => !n.leida).length;\n      setNuevasNotificaciones(noLeidas);\n      setNotificaciones(notificacionesCliente);\n    };\n\n    // Cargar inicialmente\n    cargarNotificaciones();\n\n    // Escuchar cambios en localStorage\n    window.addEventListener('storage', cargarNotificaciones);\n\n    // Marcar como leídas al cargar\n    const marcarComoLeidas = () => {\n      const todasNotificaciones = JSON.parse(localStorage.getItem('notificaciones')) || [];\n      const actualizadas = todasNotificaciones.map(n => ({\n        ...n,\n        leida: true\n      }));\n      localStorage.setItem('notificaciones', JSON.stringify(actualizadas));\n    };\n    marcarComoLeidas();\n    return () => {\n      window.removeEventListener('storage', cargarNotificaciones);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pagina-cliente\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"menu-cliente\",\n      children: /*#__PURE__*/_jsxDEV(\"li\", {\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/notificaciones\",\n          children: [\"Notificaciones\", nuevasNotificaciones > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"contador-notificaciones\",\n            children: nuevasNotificaciones\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contenido-principal\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Bienvenido a S\\xB4 FOR YOUR NUTRITION\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"notificaciones-destacadas\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\xDAltimas Notificaciones\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), notificaciones.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"No tienes notificaciones nuevas\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: notificaciones.sort((a, b) => new Date(b.fecha) - new Date(a.fecha)).slice(0, 3).map(notif => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: `notificacion ${notif.tipo}`,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: notif.titulo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: notif.mensaje\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"fecha\",\n              children: new Date(notif.fecha).toLocaleString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 21\n            }, this)]\n          }, notif.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/notificaciones\",\n          className: \"btn-ver-todas\",\n          children: \"Ver todas las notificaciones\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(PaginaCliente, \"VlKsY4tjp8Wft1oepap+a1wZ5Sg=\");\n_c = PaginaCliente;\nexport default PaginaCliente;\nvar _c;\n$RefreshReg$(_c, \"PaginaCliente\");","map":{"version":3,"names":["React","useState","useEffect","Link","jsxDEV","_jsxDEV","PaginaCliente","_s","notificaciones","setNotificaciones","nuevasNotificaciones","setNuevasNotificaciones","cargarNotificaciones","todasNotificaciones","JSON","parse","localStorage","getItem","notificacionesCliente","filter","n","destinatario","noLeidas","leida","length","window","addEventListener","marcarComoLeidas","actualizadas","map","setItem","stringify","removeEventListener","className","children","to","fileName","_jsxFileName","lineNumber","columnNumber","sort","a","b","Date","fecha","slice","notif","tipo","titulo","mensaje","toLocaleString","id","_c","$RefreshReg$"],"sources":["C:/xampp/htdocs/S_F_Y_N/frontend/src/pages/PaginaCliente.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport '../style/paginaCliente.css';\r\n\r\nfunction PaginaCliente() {\r\n  const [notificaciones, setNotificaciones] = useState([]);\r\n  const [nuevasNotificaciones, setNuevasNotificaciones] = useState(0);\r\n\r\n  // Cargar y escuchar notificaciones\r\n  useEffect(() => {\r\n    const cargarNotificaciones = () => {\r\n      const todasNotificaciones = JSON.parse(localStorage.getItem('notificaciones')) || [];\r\n      const notificacionesCliente = todasNotificaciones.filter(\r\n        n => n.destinatario === 'cliente' || n.destinatario === 'todos'\r\n      );\r\n      \r\n      // Contar no leídas\r\n      const noLeidas = notificacionesCliente.filter(n => !n.leida).length;\r\n      setNuevasNotificaciones(noLeidas);\r\n      \r\n      setNotificaciones(notificacionesCliente);\r\n    };\r\n\r\n    // Cargar inicialmente\r\n    cargarNotificaciones();\r\n\r\n    // Escuchar cambios en localStorage\r\n    window.addEventListener('storage', cargarNotificaciones);\r\n\r\n    // Marcar como leídas al cargar\r\n    const marcarComoLeidas = () => {\r\n      const todasNotificaciones = JSON.parse(localStorage.getItem('notificaciones')) || [];\r\n      const actualizadas = todasNotificaciones.map(n => ({\r\n        ...n,\r\n        leida: true\r\n      }));\r\n      localStorage.setItem('notificaciones', JSON.stringify(actualizadas));\r\n    };\r\n\r\n    marcarComoLeidas();\r\n\r\n    return () => {\r\n      window.removeEventListener('storage', cargarNotificaciones);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"pagina-cliente\">\r\n      <nav className=\"menu-cliente\">\r\n        {/* Tu menú de navegación existente */}\r\n        <li>\r\n          <Link to=\"/notificaciones\">\r\n            Notificaciones\r\n            {nuevasNotificaciones > 0 && (\r\n              <span className=\"contador-notificaciones\">\r\n                {nuevasNotificaciones}\r\n              </span>\r\n            )}\r\n          </Link>\r\n        </li>\r\n      </nav>\r\n\r\n      <div className=\"contenido-principal\">\r\n        <h1>Bienvenido a S´ FOR YOUR NUTRITION</h1>\r\n        \r\n        {/* Sección de notificaciones destacadas */}\r\n        <div className=\"notificaciones-destacadas\">\r\n          <h2>Últimas Notificaciones</h2>\r\n          {notificaciones.length === 0 ? (\r\n            <p>No tienes notificaciones nuevas</p>\r\n          ) : (\r\n            <ul>\r\n              {notificaciones\r\n                .sort((a, b) => new Date(b.fecha) - new Date(a.fecha))\r\n                .slice(0, 3)\r\n                .map(notif => (\r\n                  <li key={notif.id} className={`notificacion ${notif.tipo}`}>\r\n                    <h3>{notif.titulo}</h3>\r\n                    <p>{notif.mensaje}</p>\r\n                    <span className=\"fecha\">\r\n                      {new Date(notif.fecha).toLocaleString()}\r\n                    </span>\r\n                  </li>\r\n                ))\r\n              }\r\n            </ul>\r\n          )}\r\n          <Link to=\"/notificaciones\" className=\"btn-ver-todas\">\r\n            Ver todas las notificaciones\r\n          </Link>\r\n        </div>\r\n\r\n        {/* Resto de tu contenido para la página de cliente */}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PaginaCliente;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}